# DroidScreenCapture

[English](README.md) | 日本語

macOSのメニューバーから簡単にAndroidエミュレーターの画面録画とスクリーンショットを撮影できるアプリです。

## 機能

### 📹 画面録画

- メニューバーアイコンを**左クリック**で録画開始/停止
- 録画ファイルは自動的に `~/Desktop/EmulatorScreenRecords/` に保存されます
- ファイル名には自動的にタイムスタンプが付きます（例：`screenrecord_20241007_123456.mp4`）
- 録画停止後、自動的にFinderでファイルが表示され、クリップボードにコピーされます

### 📸 スクリーンショット

- メニューバーアイコンを**Alt（Option）+ 左クリック**でスクリーンショット撮影
- スクリーンショットは自動的に `~/Desktop/EmulatorScreenRecords/` に保存されます
- ファイル名には自動的にタイムスタンプが付きます（例：`screenshot_20241007_123456.png`）
- 撮影後、自動的にFinderでファイルが表示され、クリップボードにコピーされます

### 🔄 デバイス選択

- メニューバーアイコンを**右クリック**でメニューを表示
- 接続されているAndroidデバイス/エミュレーターの一覧から選択可能
- デバイスのモデル名が表示されます

### ⚙️ その他の機能

- **設定**: 右クリックメニューから「設定...」を選択
  - ADBパスの変更
  - 保存先フォルダの変更
- **ログイン時に起動**: 右クリックメニューから設定可能
- **起動通知**: アプリ起動時にメニューバーの下に通知が表示されます（5秒間）

## 必要な環境

- macOS 13.0以上
- Android SDK Platform Tools（adb）がインストールされていること

## インストール

1. Xcodeでプロジェクトを開く
2. ビルドして実行
3. アプリがメニューバーに常駐します

## 使い方

### 初回セットアップ

1. アプリを起動すると、メニューバーに録画アイコンが表示されます
2. 右クリックメニューから「設定...」を開き、ADBパスを確認（必要に応じて変更）
3. Androidエミュレーターまたはデバイスを接続します
4. 右クリックメニューからデバイスを選択します

### 操作方法

| 操作 | 動作 |
|------|------|
| **左クリック** | 録画開始/停止 |
| **Alt + 左クリック** | スクリーンショット撮影 |
| **右クリック** | メニュー表示 |
| **⌘ + ,** (設定画面で) | 設定を開く |

## 録画中の表示

録画中はメニューバーのアイコンが塗りつぶされた円に変わります：

- 🔴 未録画時: `record.circle`
- ⏺️ 録画中: `record.circle.fill`

## 保存先

デフォルトでは、すべてのファイルは以下のディレクトリに保存されます：

```
~/Desktop/EmulatorScreenRecords/
```

保存先は**設定画面**からカスタマイズ可能です。ディレクトリが存在しない場合は自動的に作成されます。

## 設定のカスタマイズ

右クリックメニューから「設定...」を選択すると、以下の項目をカスタマイズできます：

### ADBパス

- デフォルト: `~/Library/Android/sdk/platform-tools/adb`
- 「選択...」ボタンでファイルピッカーから選択可能
- 手動でパスを入力することも可能

### 保存先フォルダ

- デフォルト: `~/Desktop/EmulatorScreenRecords/`
- 「選択...」ボタンでフォルダピッカーから選択可能
- 手動でパスを入力することも可能

設定は自動的に保存され、アプリ再起動後も維持されます。「デフォルトに戻す」ボタンで初期設定に戻すこともできます。

## 主な特徴

✅ **シンプルで直感的** - メニューバーから1クリックで操作  
✅ **自動保存** - 録画やスクリーンショットが自動的に保存  
✅ **クリップボード連携** - ファイルが自動的にクリップボードにコピー  
✅ **Finder自動表示** - 保存後すぐにFinderでファイルを確認  
✅ **カスタマイズ可能** - ADBパスと保存先を自由に設定  
✅ **複数デバイス対応** - 複数のデバイス/エミュレーターを切り替え可能  

## よくある質問

### Q: デバイスが表示されない

**A:** 以下を確認してください：

- adbコマンドが正しくインストールされているか
- 設定画面でADBパスが正しいか
- Androidデバイス/エミュレーターが起動しているか
- USB接続の場合、USBデバッグが有効になっているか

### Q: 録画/スクリーンショットが保存されない

**A:** 設定画面で保存先フォルダのパスを確認してください。書き込み権限があるディレクトリを指定する必要があります。

### Q: 録画時間に制限はありますか？

**A:** Androidの`screenrecord`コマンドの制限により、最大3分間まで録画可能です。

### Q: ファイル形式を変更できますか？

**A:** 現在、録画はMP4形式、スクリーンショットはPNG形式で固定されています。

## トラブルシューティング

### adbコマンドが見つからない

1. Android Studioをインストールしているか確認
2. Android SDK Platform Toolsがインストールされているか確認
3. 設定画面でADBパスを手動で設定

### デバイス一覧が更新されない

右クリックメニューのデバイスサブメニューから「デバイス一覧を更新」（⌘R）を選択してください。

## 注意事項

- Androidエミュレーターやデバイスが接続されていない場合、アラートが表示されます
- 録画ファイルはエミュレーター/デバイス側で一時的に `/sdcard/screenrecord1.mp4` に保存され、録画停止後にMacへ転送されます
- ADBパスが正しくない場合、デバイスの検出や録画/スクリーンショット機能が動作しません

## ライセンス

MIT License

---

**Enjoy capturing! 🎬📱**
